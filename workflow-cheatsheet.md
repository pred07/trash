# RepoScan Master Workflow Quick Reference

This summary provides a step-by-step table mapping each phase to the specific actions, tracker updates, and expected outputs.

| Phase | Description | Goal | User Steps & Commands | Output & Tracker Updates |
| :--- | :--- | :--- | :--- | :--- |
| **0. Diagnostic** | **"The MRI Scan"** | **Identify all issues** before implementing anything. | **1. Scan Application:**<br>`python RepoScan-Analyser/main.py --all --root "Src" ...`<br><br>**2. Initialize Tracker:**<br>`python progress_tracker.py --import-analysis "Code_Inventory.xlsx"` | **Generates:**<br>• `Code_Inventory.xlsx` (The "To-Do" List)<br>• `Dynamic_Report.xlsx` (Resource Allowlist)<br><br>**Tracker Status:**<br>Starts at 0% Complete. |
| **1. Baseline** | **"The Safety Net"** | **Enable Monitoring.** Catch errors without breaking the site. | **1. Generate Config:**<br>`python csp_generator.py --mode report-only ...`<br><br>**2. Deploy:**<br>User manually copies config to `web.config`. | **Generates:**<br>• `web.config.report-only.xml`<br><br>**Action:**<br>Confirm "Report Only" headers are active in browser dev tools. |
| **2. Attribute Tagging** | **"Mark the Targets"** | **Identify inline code** (`onclick`, `style`) for manual fix. | **1. Run Tagger (Dry Run):**<br>`python batch_executor.py --mode dry-run --phase phase1_attributes`<br><br>**2. Apply Tags:**<br>`python batch_executor.py --mode apply --phase phase1_attributes` | **Generates:**<br>• `<!-- TODO -->` comments in source code.<br>• `refactoring_changelog.txt`<br><br>**Tracker Update:**<br>Run tracker with `--update-changelog`. Marks items as "In Progress" or "Identified". |
| **3. Block Extraction** | **"Heavy Lifting"** | **Auto-move large valid code** to external files. | **1. Run Extractor:**<br>`python batch_executor.py --mode apply --phase phase2_safe_blocks`<br><br>**2. Verify:**<br>Check if site still loads correctly. | **Generates:**<br>• New `.js`/`.css` files in `public/`.<br>• Source HTML updated with `<script src="...">`.<br><br>**Tracker Update:**<br>Marks large block items as "Completed". |
| **4. Manual Refactor** | **"The Clean Up"** | **Fix what automation can't.** (Logic, complex attributes). | **1. Search & Fix:**<br>Dev searches for `TODO` tags.<br><br>**2. Refactor:**<br>Move logic to `common-csp.js`, remove inline attribute. | **Action:**<br>Manual code changes.<br><br>**Tracker Status:**<br>Project Manager manually updates remaining items to "Completed". |
| **5. Enforcement** | **"Lock It Down"** | **Switch to Strict Mode.** Block all unauthorized code. | **1. Generate Strict Config:**<br>`python csp_generator.py --mode enforcement ...`<br><br>**2. Final Deploy:**<br>Update `web.config` to Enforcement Mode. | **Generates:**<br>• `web.config.enforcement.xml`<br><br>**Final Result:**<br>Tracker shows 100% Completion. Site is secure. |
